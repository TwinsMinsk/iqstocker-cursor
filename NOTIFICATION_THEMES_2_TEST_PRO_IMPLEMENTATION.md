# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è notification_themes_2_test_pro

## üìã –ó–∞–¥–∞—á–∞
–°–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Ç–∞—Ä–∏—Ñ–µ Test Pro, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –≤—Ç–æ—Ä–æ–º –∑–∞–ø—Ä–æ—Å–µ —Ç–µ–º –≤–æ –≤—Ç–æ—Ä–æ–º –ø–µ—Ä–∏–æ–¥–µ (–¥–Ω–∏ 7-13 —Å –Ω–∞—á–∞–ª–∞ —Ç–∞—Ä–∏—Ñ–∞).

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –ü–†–ê–í–ò–õ–¨–ù–û

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ –ª–µ–∫—Å–∏–∫–æ–Ω ‚úÖ
**–§–∞–π–ª:** `bot/lexicon/lexicon_ru.py`

–î–æ–±–∞–≤–ª–µ–Ω –∫–ª—é—á `notification_themes_2_test_pro` —Å —Ç–µ–∫—Å—Ç–æ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Å–ª–æ–≤–∞—Ä—å `LEXICON_RU`:

```python
'notification_themes_2_test_pro': (
    "‚õîÔ∏è\n\n"
    "–¢—ã –ø–æ–ª—É—á–∏–ª –ø–æ—Å–ª–µ–¥–Ω—é—é –ø–æ–¥–±–æ—Ä–∫—É —Ç–µ–º –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Ç–∞—Ä–∏—Ñ–µ.\n\n"
    "–î–∞–ª—å—à–µ - –≤—ã–±–æ—Ä –∑–∞ —Ç–æ–±–æ–π.\n\n"
    "–ñ–¥–∞—Ç—å –Ω–µ–¥–µ–ª—é –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ PRO / ULTRA –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.\n\n"
    "–í–∞–∂–Ω–æ - –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã —Ç–∞—Ä–∏—Ñ–∞ –ª–∏–º–∏—Ç—ã –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ–±–Ω–æ–≤—è—Ç—Å—è - –∏ —Ç—ã —Å—Ä–∞–∑—É –∂–µ —Å–º–æ–∂–µ—à—å –∑–∞–ø—Ä–æ—Å–∏—Ç—å –Ω–æ–≤—É—é –ø–æ–¥–±–æ—Ä–∫—É —Ç–µ–º. "
    "–ü–æ —Å—É—Ç–∏, —ç—Ç–æ +1 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–µ–¥–µ–ª—è –∏ +1 –ø–æ–¥–±–æ—Ä–∫–∞.\n\n"
    "–ù–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π —Ä–µ—à–µ–Ω–∏–µ.\n\n"
    "–ü–µ—Ä–µ—Ö–æ–¥–∏ –Ω–∞ PRO –∏–ª–∏ ULTRA —Å–µ–π—á–∞—Å - —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å IQ –†–∞–¥–∞—Ä –∏ –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—É—é –ø–æ–¥–±–æ—Ä–∫—É —Ç–µ–º —É–∂–µ —Å–µ–≥–æ–¥–Ω—è."
),
```

### 2. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è handler —Ç–µ–º ‚úÖ
**–§–∞–π–ª:** `bot/handlers/themes.py`

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –≤–æ –≤—Ç–æ—Ä–æ–º –ø–µ—Ä–∏–æ–¥–µ:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞—Ä–∏—Ñ–∞ TEST_PRO
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ (0, 1, 2...)
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–µ—Ä–∏–æ–¥–∞ 2+** - –∑–∞–ø—Ä–æ—Å—ã —Ç–µ–º –∑–∞–ø—Ä–µ—â–µ–Ω—ã –¥–ª—è TEST_PRO –≤ –ø–µ—Ä–∏–æ–¥–µ 2 –∏ –≤—ã—à–µ
- –ü–æ–¥—Å—á–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ç–µ–∫—É—â–µ–º –ø–µ—Ä–∏–æ–¥–µ
- –¢—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞:
  - –ü–µ—Ä–∏–æ–¥ = 1 (–≤—Ç–æ—Ä–æ–π –ø–µ—Ä–∏–æ–¥, –¥–Ω–∏ 7-13)
  - –ï—â–µ –ù–ï –±—ã–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —ç—Ç–æ–º –ø–µ—Ä–∏–æ–¥–µ (`requests_in_period == 0`)
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç –ü–ï–†–í–´–ô (–∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π) –∑–∞–ø—Ä–æ—Å –≤ —ç—Ç–æ–º –ø–µ—Ä–∏–æ–¥–µ

–õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:
1. –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–µ–º–∞–º–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π, –≤–∫–ª—é—á–∞—é—â–µ–π –∫–Ω–æ–ø–∫—É –ø–æ–¥–ø–∏—Å–∫–∏
2. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤)

**–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–∏–æ–¥–∞ 2:**
- –ï—Å–ª–∏ `current_period >= 2` –∏ —Ç–∞—Ä–∏—Ñ TEST_PRO ‚Üí –∑–∞–ø—Ä–æ—Å –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–õ–∏–º–∏—Ç—ã –∏—Å—á–µ—Ä–ø–∞–Ω—ã"
- –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Ç–µ–º –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞ (–¥–µ–Ω—å 14+)

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ‚úÖ
**–§–∞–π–ª:** `bot/keyboards/themes.py`

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_themes_menu_keyboard_with_subscribe()`:
- –í–∫–ª—é—á–∞–µ—Ç –æ–±—ã—á–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–º—ã, –ê—Ä—Ö–∏–≤ —Ç–µ–º)
- –î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É `button_subscribe_pro_ultra` –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É
- –ö–Ω–æ–ø–∫–∞ –≤–µ–¥–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω `show_test_pro_offer` —Å —Å–∫–∏–¥–∫–æ–π 50%

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –ë–î (lexicon_entries) ‚úÖ
**–§–∞–π–ª:** `database/migrations/versions/e1f2a3b4c5d6_add_notification_themes_2_test_pro_to_lexicon.py`

–°–æ–∑–¥–∞–Ω–∞ –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –º–∏–≥—Ä–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è:
- –î–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü—É `lexicon_entries`
- –° –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π `LEXICON_RU`
- –ö–ª—é—á: `notification_themes_2_test_pro`

–ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞: ‚úÖ

## ‚ùå –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

### 1. –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ ‚ùå
**–§–∞–π–ª:** `database/migrations/versions/d9e8f7a6b5c4_add_notification_themes_2_test_pro.py`

**–û—à–∏–±–∫–∞:** –î–æ–±–∞–≤–∏–ª –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü—É `broadcast_messages` –≤–º–µ—Å—Ç–æ `lexicon_entries`

**–ü–æ—á–µ–º—É –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- `broadcast_messages` - —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞—Å—Å—ã–ª–æ–∫
- `lexicon_entries` - —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π
- –°—Ç–∞—Ä–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ (–Ω–µ —É–¥–∞–ª—è–µ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏, –Ω–æ –æ–Ω–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞ ‚ùå
**–§–∞–π–ª:** `bot/handlers/themes.py`

**–ü–µ—Ä–≤–∞—è –æ—à–∏–±–∫–∞:** –ü—Ä–æ–≤–µ—Ä—è–ª `requests_in_period == 1`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–ª–æ "–ø–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –≤—Ç–æ—Ä–æ–º –∑–∞–ø—Ä–æ—Å–µ"

**–ü–æ—á–µ–º—É –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –í –∫–∞–∂–¥–æ–º –ø–µ—Ä–∏–æ–¥–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ –û–î–ò–ù –∑–∞–ø—Ä–æ—Å
- –í—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –≤ –æ–¥–Ω–æ–º –ø–µ—Ä–∏–æ–¥–µ –±—ã—Ç—å –Ω–µ –º–æ–∂–µ—Ç
- –£—Å–ª–æ–≤–∏–µ `requests_in_period == 1` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –ò–∑–º–µ–Ω–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `requests_in_period == 0`
- –¢–µ–ø–µ—Ä—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ü–ï–†–í–û–ú –∑–∞–ø—Ä–æ—Å–µ –≤–æ –≤—Ç–æ—Ä–æ–º –ø–µ—Ä–∏–æ–¥–µ
- –≠—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ: –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –≤ –ø–µ—Ä–∏–æ–¥–µ 1 = –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤ –ø–µ—Ä–∏–æ–¥–µ 1

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ 2 ‚ùå
**–§–∞–π–ª:** `bot/handlers/themes.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –±—ã–ª–æ –∑–∞—â–∏—Ç—ã –æ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–µ–º –≤ –ø–µ—Ä–∏–æ–¥–µ 2 (–¥–µ–Ω—å 14+) –¥–ª—è TEST_PRO

**–ü–æ—á–µ–º—É –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –¢–∞—Ä–∏—Ñ Test Pro –¥–ª–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ 14 –¥–Ω–µ–π (–ø–µ—Ä–∏–æ–¥—ã 0 –∏ 1)
- –ü–µ—Ä–∏–æ–¥ 2 –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤ –¥–µ–Ω—å 14, –∫–æ–≥–¥–∞ —Ç–∞—Ä–∏—Ñ —É–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã–ª –∏—Å—Ç–µ—á—å
- –ú–µ–∂–¥—É –æ–∫–æ–Ω—á–∞–Ω–∏–µ–º –ø–µ—Ä–∏–æ–¥–∞ 1 –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–∞—Ä–∏—Ñ–∞ –º–æ–≥–ª–æ –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ç–µ–º—ã –≤ –ø–µ—Ä–∏–æ–¥–µ 2 –¥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `if current_period >= 2` –¥–ª—è TEST_PRO
- –ï—Å–ª–∏ –ø–µ—Ä–∏–æ–¥ >= 2, –∑–∞–ø—Ä–æ—Å –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "–õ–∏–º–∏—Ç—ã –∏—Å—á–µ—Ä–ø–∞–Ω—ã"
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ç–µ–º—ã —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–∏–æ–¥–∞—Ö 0 –∏ 1

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å—é

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚úÖ
–ö–ª—é—á `notification_themes_2_test_pro` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏:

**URL:** `/lexicon?category=broadcast`

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** –†–∞—Å—Å—ã–ª–∫–∞

**–õ–æ–≥–∏–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏** (–∏–∑ `admin_panel/views/lexicon.py`):
```python
elif key.startswith('notification_'):
    categories['broadcast']['items'][key] = value
```

–í—Å–µ –∫–ª—é—á–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `notification_`, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–†–∞—Å—Å—ã–ª–∫–∞".

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚úÖ

1. **–ö–∞–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å:**
   - –û—Ç–∫—Ä—ã—Ç—å `/lexicon?category=broadcast`
   - –ù–∞–π—Ç–∏ –∫–ª—é—á `notification_themes_2_test_pro`
   - –ù–∞–∂–∞—Ç—å "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
   - –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

2. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î (`lexicon_entries`)
   - Redis –∫–µ—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è
   - –ë–æ—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –∫–ª—é—á—É
   - **–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ** –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞

## üìä –õ–æ–≥–∏–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞

### –£—Å–ª–æ–≤–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è:
1. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Ç–∞—Ä–∏—Ñ–µ `TEST_PRO`
2. ‚úÖ –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ `current_tariff_started_at`
3. ‚úÖ –¢–µ–∫—É—â–∏–π –ø–µ—Ä–∏–æ–¥ = 1 (–≤—Ç–æ—Ä–æ–π –ø–µ—Ä–∏–æ–¥, –¥–Ω–∏ 7-13 —Å –Ω–∞—á–∞–ª–∞ —Ç–∞—Ä–∏—Ñ–∞)
4. ‚úÖ –í —Ç–µ–∫—É—â–µ–º –ø–µ—Ä–∏–æ–¥–µ –µ—â–µ –ù–ï –±—ã–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–µ–º (`requests_in_period == 0`)
5. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç –ü–ï–†–í–´–ô (–∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π) –∑–∞–ø—Ä–æ—Å –≤ —ç—Ç–æ–º –ø–µ—Ä–∏–æ–¥–µ

**–í–∞–∂–Ω–æ:** 
- –í –∫–∞–∂–¥–æ–º –ø–µ—Ä–∏–æ–¥–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ –û–î–ò–ù –∑–∞–ø—Ä–æ—Å —Ç–µ–º
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –≤–æ –≤—Ç–æ—Ä–æ–º –ø–µ—Ä–∏–æ–¥–µ
- **–ü–µ—Ä–∏–æ–¥ 2 (–¥–µ–Ω—å 14+) –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù** - –∑–∞–ø—Ä–æ—Å—ã —Ç–µ–º –¥–ª—è TEST_PRO –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã
- –¢–∞—Ä–∏—Ñ Test Pro –¥–ª–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ 14 –¥–Ω–µ–π, –ø–æ—ç—Ç–æ–º—É –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø–µ—Ä–∏–æ–¥—ã 0 –∏ 1

### –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞:
```python
cooldown_days = 7  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
time_diff = now - tariff_start_time
current_period = int(time_diff.total_seconds() / (cooldown_days * 24 * 3600))

# –ü–µ—Ä–∏–æ–¥ 0: –¥–Ω–∏ 0-6 (–ø–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è) - 1 –∑–∞–ø—Ä–æ—Å
# –ü–µ—Ä–∏–æ–¥ 1: –¥–Ω–∏ 7-13 (–≤—Ç–æ—Ä–∞—è –Ω–µ–¥–µ–ª—è) - 1 –∑–∞–ø—Ä–æ—Å ‚Üê —Ç—Ä–∏–≥–≥–µ—Ä –ø—Ä–∏ –ü–ï–†–í–û–ú –∑–∞–ø—Ä–æ—Å–µ –∑–¥–µ—Å—å
# –ü–µ—Ä–∏–æ–¥ 2: –¥–µ–Ω—å 14+ - –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù –¥–ª—è TEST_PRO (—Ç–∞—Ä–∏—Ñ –∏—Å—Ç–µ–∫–∞–µ—Ç –Ω–∞ 14 –¥–µ–Ω—å)
```

**–í–∞–∂–Ω–æ:** 
- –¢–∞—Ä–∏—Ñ Test Pro –¥–ª–∏—Ç—Å—è –≤—Å–µ–≥–æ 14 –¥–Ω–µ–π
- –ü–æ—Å–ª–µ 14 –¥–Ω–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Ç–∞—Ä–∏—Ñ FREE
- –ü–æ—ç—Ç–æ–º—É –ø–µ—Ä–∏–æ–¥–∞ 2 (–¥–µ–Ω—å 14+) –±—ã—Ç—å –Ω–µ –º–æ–∂–µ—Ç - –∑–∞–ø—Ä–æ—Å—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–∏–æ–¥–µ 1 (–¥–Ω–∏ 7-13)

**–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```python
if current_period >= 2:  # –ü–µ—Ä–∏–æ–¥ 2 –∏–ª–∏ –±–æ–ª—å—à–µ
    # –ë–õ–û–ö–ò–†–£–ï–ú –∑–∞–ø—Ä–æ—Å - —Ç–∞—Ä–∏—Ñ –¥–æ–ª–∂–µ–Ω –±—ã–ª –∏—Å—Ç–µ—á—å
    return "–õ–∏–º–∏—Ç—ã –∏—Å—á–µ—Ä–ø–∞–Ω—ã"

if current_period == 1:  # –í—Ç–æ—Ä–æ–π –ø–µ—Ä–∏–æ–¥
    # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å—ã –≤ —ç—Ç–æ–º –ø–µ—Ä–∏–æ–¥–µ
    requests_in_period = count_requests_in_period(user_id, period_start, period_end)
    
    if requests_in_period == 0:  # –ï—â–µ –ù–ï –±—ã–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —ç—Ç–æ–º –ø–µ—Ä–∏–æ–¥–µ
        should_send_notification = True  # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        # –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ requests_in_period —Å—Ç–∞–Ω–µ—Ç 1
        # –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–µ—Ä–∏–æ–¥–µ
        # –ù–æ –ø–µ—Ä–∏–æ–¥–∞ 2 –¥–ª—è TEST_PRO –Ω–µ –±—É–¥–µ—Ç - —Ç–∞—Ä–∏—Ñ –∏—Å—Ç–µ—á–µ—Ç
```

### –ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:
1. **–û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** —Å —Ç–µ–º–∞–º–∏ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π (–≤–∫–ª—é—á–∞–µ—Ç –∫–Ω–æ–ø–∫—É –ø–æ–¥–ø–∏—Å–∫–∏)
2. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** —Å —Ç–µ–∫—Å—Ç–æ–º –∏–∑ `notification_themes_2_test_pro` –∏ –∫–Ω–æ–ø–∫–æ–π `button_subscribe_pro_ultra`

## üìù –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `bot/lexicon/lexicon_ru.py` - –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
2. `bot/handlers/themes.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞
3. `bot/keyboards/themes.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–æ–π –ø–æ–¥–ø–∏—Å–∫–∏

### –ú–∏–≥—Ä–∞—Ü–∏–∏:
1. `database/migrations/versions/d9e8f7a6b5c4_add_notification_themes_2_test_pro.py` - ‚ùå –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è (broadcast_messages)
2. `database/migrations/versions/e1f2a3b4c5d6_add_notification_themes_2_test_pro_to_lexicon.py` - ‚úÖ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è (lexicon_entries)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î ‚úÖ
```
‚úÖ –ó–∞–ø–∏—Å—å –Ω–∞–π–¥–µ–Ω–∞ –≤ lexicon_entries!
Key: notification_themes_2_test_pro
Category: LEXICON_RU
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ LexiconService ‚úÖ
```
‚úÖ –ö–ª—é—á 'notification_themes_2_test_pro' –Ω–∞–π–¥–µ–Ω –≤ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–º –ª–µ–∫—Å–∏–∫–æ–Ω–µ!
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚úÖ
```
‚úÖ –ö–ª—é—á 'notification_themes_2_test_pro' –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ '–†–∞—Å—Å—ã–ª–∫–∞' (broadcast)
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ
```
‚úÖ –ö–ª—é—á 'notification_themes_2_test_pro' –ù–ï —Å–∫—Ä—ã—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ –¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ª–µ–∫—Å–∏–∫–æ–Ω
- ‚úÖ –õ–æ–≥–∏–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –ó–∞–ø–∏—Å—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –ë–î (lexicon_entries)
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ (/lexicon?category=broadcast)
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤ –±–æ—Ç–µ

### üìå –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:
1. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤ —Ç–µ–º (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º)
2. –¢—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¢–û–õ–¨–ö–û –≤–æ –≤—Ç–æ—Ä–æ–º –ø–µ—Ä–∏–æ–¥–µ (–¥–Ω–∏ 7-13)
3. –¢—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¢–û–õ–¨–ö–û –ø—Ä–∏ –≤—Ç–æ—Ä–æ–º –∑–∞–ø—Ä–æ—Å–µ –≤ —ç—Ç–æ–º –ø–µ—Ä–∏–æ–¥–µ
4. –ö–Ω–æ–ø–∫–∞ –≤–µ–¥–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω —Å —Å–∫–∏–¥–∫–æ–π 50% (action="show_test_pro_offer")

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

