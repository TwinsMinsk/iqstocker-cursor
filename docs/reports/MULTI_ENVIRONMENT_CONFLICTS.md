# ‚ö†Ô∏è –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö

**–î–∞—Ç–∞:** 14 –Ω–æ—è–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ª–∏–º–∏—Ç–æ–≤ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –±–æ—Ç–∞ –≤ –¥–≤—É—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö –Ω–∞ Railway

---

## üîç –ü–†–û–ë–õ–ï–ú–ê

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –≤ –¥–≤—É—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö –Ω–∞ Railway (–Ω–∞–ø—Ä–∏–º–µ—Ä, staging –∏ production) –≤–æ–∑–Ω–∏–∫–∞—é—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã:
- –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏–º–∏—Ç—ã –≤ —Ä–∞–∑–Ω—ã—Ö –±–æ—Ç–∞—Ö
- –õ–∏–º–∏—Ç—ã –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã –¥–≤–∞–∂–¥—ã

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –±–æ—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –±–æ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- **Staging:** `@IQStockerStagingBot` (test token)
- **Production:** `@IQStockerBot` (production token)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ª–∏–º–∏—Ç–æ–≤
- –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ production

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ö–∞–∂–¥–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –ë–î:
- **Staging:** `DATABASE_URL_STAGING`
- **Production:** `DATABASE_URL_PRODUCTION`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ Redis –∏–Ω—Å—Ç–∞–Ω—Å—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ö–∞–∂–¥–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π Redis:
- **Staging:** `REDIS_URL_STAGING`
- **Production:** `REDIS_URL_PRODUCTION`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ò–∑–æ–ª—è—Ü–∏—è –∫—ç—à–∞ –∏ FSM —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –æ—á–µ—Ä–µ–¥—è–º–∏

### 4. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å—ã –¥–ª—è Redis –∫–ª—é—á–µ–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å—ã –¥–ª—è Redis –∫–ª—é—á–µ–π:
```python
# –í config/redis.py
REDIS_KEY_PREFIX = os.getenv("ENVIRONMENT", "production")  # "staging" –∏–ª–∏ "production"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –î–∞–∂–µ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ Redis, –∫–ª—é—á–∏ –±—É–¥—É—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
- –õ–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ú–û–ú–ï–ù–¢–´

### Telegram Bot API –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ bot token –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –¥–≤—É—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö:
```
TelegramConflictError: terminated by other getUpdates request
```

**–†–µ—à–µ–Ω–∏–µ:** 
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ bot tokens –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook –≤–º–µ—Å—Ç–æ polling (–æ–¥–∏–Ω webhook –Ω–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–µ)

### –õ–∏–º–∏—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–∏–º–∏—Ç—ã —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –¥–≤–∞–∂–¥—ã, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–æ–∏—Ö –±–æ—Ç–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏ —Å–ø–∏—Å–∞–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –ó–ê–ü–£–°–ö–û–ú –ù–û–í–û–ì–û –û–ö–†–£–ñ–ï–ù–ò–Ø

- [ ] –°–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π Telegram –±–æ—Ç —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º token
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π Redis –∏–Ω—Å—Ç–∞–Ω—Å
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ—Ñ–∏–∫—Å—ã –¥–ª—è Redis –∫–ª—é—á–µ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## üîß –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### Staging Environment
```env
BOT_TOKEN=staging_bot_token
DATABASE_URL=postgresql://staging_db
REDIS_URL=redis://staging_redis
ENVIRONMENT=staging
```

### Production Environment
```env
BOT_TOKEN=production_bot_token
DATABASE_URL=postgresql://production_db
REDIS_URL=redis://production_redis
ENVIRONMENT=production
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:

1. **–õ–æ–≥–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:**
   ```
   TelegramConflictError: terminated by other getUpdates request
   ```

2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤:**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –ª–∏–º–∏—Ç—ã —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∞–Ω–æ–º–∞–ª—å–Ω—ã–µ —Å–ø–∏—Å–∞–Ω–∏—è

3. **–°–æ—Å—Ç–æ—è–Ω–∏—è FSM:**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç –º–µ–∂–¥—É –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:
- ‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏
- ‚úÖ –õ–∏–º–∏—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ staging
- ‚úÖ Production –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç —Ç–µ—Å—Ç–æ–≤

---

**Prepared by:** AI Development Team  
**Date:** November 14, 2025  
**Status:** ‚úÖ RECOMMENDATIONS READY

