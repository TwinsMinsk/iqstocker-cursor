{% extends "admin/base.html" %}

{% block title %}Настройки - IQStocker Admin{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1><i class="fas fa-cog"></i> Настройки системы</h1>
        <p class="text-muted">Конфигурация параметров IQStocker</p>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-sliders-h"></i> Основные параметры</h5>
            </div>
            <div class="card-body">
                <form method="POST">
                    {{ form.hidden_tag() }}
                    
                    <div class="mb-3">
                        {{ form.new_works_months.label(class="form-label") }}
                        {{ form.new_works_months(class="form-control", placeholder="3") }}
                        <div class="form-text">
                            Количество месяцев, после которых работы считаются "старыми". 
                            Используется для расчета доли продаж новых работ.
                        </div>
                        {% if form.new_works_months.errors %}
                            <div class="text-danger">
                                {% for error in form.new_works_months.errors %}
                                    <small>{{ error }}</small>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    
                    <div class="d-grid">
                        {{ form.submit(class="btn btn-primary btn-lg") }}
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> Информация</h5>
            </div>
            <div class="card-body">
                <h6>Параметр "Новые работы":</h6>
                <p class="text-muted">
                    Определяет период, в течение которого работы считаются "новыми". 
                    Это влияет на расчет метрики "Доля продаж новых работ" в аналитике.
                </p>
                
                <h6 class="mt-3">Рекомендуемые значения:</h6>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success"></i> 3 месяца - стандарт</li>
                    <li><i class="fas fa-check text-success"></i> 2 месяца - для активных авторов</li>
                    <li><i class="fas fa-check text-success"></i> 4-6 месяцев - для начинающих</li>
                </ul>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h5><i class="fas fa-exclamation-triangle"></i> Предупреждение</h5>
            </div>
            <div class="card-body">
                <p class="text-muted">
                    Изменение этого параметра повлияет на все будущие аналитики. 
                    Существующие отчеты не будут изменены.
                </p>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-cogs"></i> Дополнительные настройки</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Лимиты по подпискам</h6>
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>Подписка</th>
                                    <th>Аналитика</th>
                                    <th>Темы</th>
                                    <th>Топ-темы</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>FREE</td>
                                    <td>0</td>
                                    <td>1/неделя</td>
                                    <td>0</td>
                                </tr>
                                <tr>
                                    <td>TEST_PRO</td>
                                    <td>1</td>
                                    <td>5/неделя</td>
                                    <td>5</td>
                                </tr>
                                <tr>
                                    <td>PRO</td>
                                    <td>2</td>
                                    <td>5/неделя</td>
                                    <td>5</td>
                                </tr>
                                <tr>
                                    <td>ULTRA</td>
                                    <td>4</td>
                                    <td>10/неделя</td>
                                    <td>10</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h6>Системные параметры</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-clock"></i> TEST_PRO длительность: 14 дней</li>
                            <li><i class="fas fa-calendar"></i> Обновление календаря: 1 числа месяца</li>
                            <li><i class="fas fa-bell"></i> Уведомления о темах: еженедельно</li>
                            <li><i class="fas fa-file-csv"></i> Максимальный размер CSV: 10MB</li>
                            <li><i class="fas fa-database"></i> Кеширование тем: 30 дней</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
